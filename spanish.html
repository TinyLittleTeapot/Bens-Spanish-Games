<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Spanish Numbers</title>

  <style>
    body{
      margin:0;
      font-family:-apple-system,system-ui;
      background:#0b1220;
      color:#e8eefc;
      text-align:center;
      padding:16px;
    }

    h1{font-size:20px;margin:6px 0 2px;}

    .header{
      margin-bottom:14px;
    }
    .header h2{
      margin:0 0 6px;
      font-size:32px;
      font-weight:900;
      letter-spacing:1px;
    }
    .header img{
      width:100%;
      max-width:320px;
      border-radius:16px;
      border:2px solid rgba(255,255,255,0.25);
    }

    #num{
      font-size:56px;
      font-weight:900;
      margin:18px 0 10px;
    }

    .hint{
      opacity:0.85;
      margin-bottom:12px;
    }

    .topRow{
      display:grid;
      gap:10px;
      margin-top:10px;
    }

    select{
      width:100%;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:#121c33;
      color:#e8eefc;
      font-size:16px;
      font-weight:800;
    }

    .topBtn{
      width:100%;
      padding:14px;
      font-size:18px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.06);
      color:#e8eefc;
      font-weight:800;
    }

    .pill{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.06);
      font-weight:800;
      display:inline-block;
    }

    #choices{
      display:grid;
      gap:12px;
      margin-top:12px;
    }

    button.choice{
      width:100%;
      padding:16px;
      font-size:22px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:#121c33;
      color:#e8eefc;
      font-weight:800;
    }

    button.choice.good{
      background:rgba(96,255,165,0.18);
      border-color:rgba(96,255,165,0.55);
    }

    button.choice.bad{
      background:rgba(255,96,96,0.18);
      border-color:rgba(255,96,96,0.55);
    }

    #status{
      margin-top:12px;
      min-height:22px;
      font-size:18px;
      font-weight:900;
    }

    .flag{
      position:fixed;
      right:12px;
      bottom:12px;
      font-size:26px;
      opacity:0.95;
      user-select:none;
    }
  </style>
</head>

<body>

<div class="header">
  <h2>PUTA</h2>
  <img src="IMG_2818.jpeg" alt="Ben">
</div>

<h1>Spanish Numbers</h1>
<div id="num">‚Äì</div>
<div class="hint">Tap the correct Spanish</div>

<div class="topRow">
  <button class="topBtn" onclick="showLevelSelect()">üîô Change level</button>

  <select id="level" onchange="startGame()">
    <option value="20">Level: 0 to 20</option>
    <option value="100">Level: 0 to 100</option>
    <option value="9999" selected>Level: 0 to 9999</option>
  </select>

  <button class="topBtn" onclick="sayAnswer()">üîä Hear the answer</button>

  <div class="pill">Aciertos: <span id="correctCount">0</span></div>
</div>

<div id="choices"></div>
<div id="status"></div>

<div class="flag">üá™üá∏</div>

<script>
/* Feedback */
const praise = ["¬°Muy bien!", "¬°Bravo!", "¬°Correcto!", "¬°Genial!"];
const tryAgain = "Int√©ntalo de nuevo";

/* State */
let current = 0;
let correctTotal = 0;
let maxRange = 9999;
let locked = false;

/* Voice */
let esVoice = null;
function loadSpanishVoice(){
  const voices = speechSynthesis.getVoices();
  esVoice =
    voices.find(v => (v.lang||"").toLowerCase().startsWith("es-es")) ||
    voices.find(v => (v.lang||"").toLowerCase().startsWith("es")) ||
    null;
}
speechSynthesis.onvoiceschanged = loadSpanishVoice;
loadSpanishVoice();

function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  if(esVoice) u.voice = esVoice;
  u.lang = esVoice?.lang || "es-ES";
  u.rate = 0.95;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function waitForSpeechEnd(text){
  return new Promise(resolve=>{
    const u = new SpeechSynthesisUtterance(text);
    if(esVoice) u.voice = esVoice;
    u.lang = esVoice?.lang || "es-ES";
    u.rate = 0.95;
    u.onend = resolve;
    u.onerror = resolve;
    speechSynthesis.speak(u);
  });
}

/* Sounds */
let audioCtx=null;
function ctx(){
  if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  return audioCtx;
}
function beep(freq,ms,type="sine",vol=0.08){
  const c=ctx(),o=c.createOscillator(),g=c.createGain();
  o.type=type;o.frequency.value=freq;g.gain.value=vol;
  o.connect(g);g.connect(c.destination);
  o.start();setTimeout(()=>o.stop(),ms);
}
function wrongBuzzer(){
  beep(180,120,"square",0.09);
  setTimeout(()=>beep(140,180,"square",0.09),130);
}
function rightChime(){
  beep(660,90);setTimeout(()=>beep(880,120),110);setTimeout(()=>beep(990,140),250);
}

/* Numbers */
const units={0:"cero",1:"uno",2:"dos",3:"tres",4:"cuatro",5:"cinco",6:"seis",7:"siete",8:"ocho",9:"nueve"};
const teens={10:"diez",11:"once",12:"doce",13:"trece",14:"catorce",15:"quince",16:"diecis√©is",17:"diecisiete",18:"dieciocho",19:"diecinueve"};
const tens={20:"veinte",30:"treinta",40:"cuarenta",50:"cincuenta",60:"sesenta",70:"setenta",80:"ochenta",90:"noventa"};
const hundreds={1:"ciento",2:"doscientos",3:"trescientos",4:"cuatrocientos",5:"quinientos",6:"seiscientos",7:"setecientos",8:"ochocientos",9:"novecientos"};

function under100(n){
  if(n<10) return units[n];
  if(n<20) return teens[n];
  if(n===20) return "veinte";
  if(n<30) return "veinti"+units[n%10];
  if(n%10===0) return tens[n];
  return tens[Math.floor(n/10)*10]+" y "+units[n%10];
}
function under1000(n){
  if(n<100) return under100(n);
  if(n===100) return "cien";
  const h=Math.floor(n/100),r=n%100;
  return r===0?hundreds[h]:hundreds[h]+" "+under100(r);
}
function numberToSpanish(n){
  if(n===0) return units[0];
  if(n<1000) return under1000(n);
  const t=Math.floor(n/1000),r=n%1000;
  let left=t===1?"mil":units[t]+" mil";
  return r===0?left:left+" "+under1000(r);
}

/* UI */
function sayAnswer(){ speak(numberToSpanish(current)); }

function startGame(){
  maxRange=Number(level.value);
  correctTotal=0;
  correctCount.innerText="0";
  level.style.display="none";
  status.innerText="";
  pickNew();
}
function showLevelSelect(){
  level.style.display="block";
  status.innerText="Elige un nivel";
}

function renderChoices(){
  choices.innerHTML="";
  const correct=numberToSpanish(current);
  let opts=[correct];
  while(opts.length<3){
    const t=numberToSpanish(Math.floor(Math.random()*(maxRange+1)));
    if(!opts.includes(t)) opts.push(t);
  }
  opts.sort(()=>Math.random()-0.5);
  opts.forEach(t=>{
    const b=document.createElement("button");
    b.className="choice";
    b.innerText=t;
    b.onclick=()=>handleChoice(b,t);
    choices.appendChild(b);
  });
}

function pickNew(){
  locked=false;
  current=Math.floor(Math.random()*(maxRange+1));
  num.innerText=current;
  status.innerText="";
  renderChoices();
}

async function handleChoice(btn,chosen){
  if(locked) return;
  const correct=numberToSpanish(current);
  if(chosen===correct){
    locked=true;
    btn.classList.add("good");
    correctTotal++;
    correctCount.innerText=correctTotal;
    const msg=praise[Math.floor(Math.random()*praise.length)];
    status.innerText="‚úÖ "+msg;
    rightChime();
    await waitForSpeechEnd(correct);
    rightChime();
    await waitForSpeechEnd(msg);
    setTimeout(pickNew,300);
  }else{
    btn.classList.add("bad");
    status.innerText="‚ùå "+tryAgain;
    wrongBuzzer();
    speak(tryAgain);
  }
}

pickNew();
</script>

</body>
</html>